diff --git a/lib/matplotlib/axes/_base.py b/lib/matplotlib/axes/_base.py
index d393cf209c..3c85dbf318 100644
--- a/lib/matplotlib/axes/_base.py
+++ b/lib/matplotlib/axes/_base.py
@@ -1165,6 +1165,9 @@ class _AxesBase(martist.Artist):
         locator : Callable[[Axes, Renderer], Bbox]
         """
         self._axes_locator = locator
+        # Set the figure on the locator if it has a set_figure method
+        if hasattr(locator, 'set_figure') and self.figure is not None:
+            locator.set_figure(self.figure)
         self.stale = True
 
     def get_axes_locator(self):
diff --git a/lib/matplotlib/offsetbox.py b/lib/matplotlib/offsetbox.py
index 13af941552..f8e37d58b6 100644
--- a/lib/matplotlib/offsetbox.py
+++ b/lib/matplotlib/offsetbox.py
@@ -234,7 +234,8 @@ class OffsetBox(martist.Artist):
         """
         super().set_figure(fig)
         for c in self.get_children():
-            c.set_figure(fig)
+            if c is not None:
+                c.set_figure(fig)
 
     @martist.Artist.axes.setter
     def axes(self, ax):
diff --git a/reproduce_issue.py b/reproduce_issue.py
new file mode 100644
index 0000000000..56d165c163
--- /dev/null
+++ b/reproduce_issue.py
@@ -0,0 +1,7 @@
+import matplotlib.pyplot as plt
+from mpl_toolkits.axes_grid1.inset_locator import inset_axes
+
+
+fig, (ax, ax2) = plt.subplots(1, 2, figsize=[5.5, 2.8])
+axins = inset_axes(ax, width=1.3, height=0.9)
+plt.savefig('test.png')
\ No newline at end of file
diff --git a/test.png b/test.png
new file mode 100644
index 0000000000..d9640bdad0
Binary files /dev/null and b/test.png differ
diff --git a/test1.png b/test1.png
new file mode 100644
index 0000000000..5fb0e950bc
Binary files /dev/null and b/test1.png differ
diff --git a/test2.png b/test2.png
new file mode 100644
index 0000000000..a0cd04840a
Binary files /dev/null and b/test2.png differ
diff --git a/test3.png b/test3.png
new file mode 100644
index 0000000000..245e9f04ec
Binary files /dev/null and b/test3.png differ
diff --git a/test_comprehensive.py b/test_comprehensive.py
new file mode 100644
index 0000000000..d8ae63a7d2
--- /dev/null
+++ b/test_comprehensive.py
@@ -0,0 +1,29 @@
+import matplotlib.pyplot as plt
+from mpl_toolkits.axes_grid1.inset_locator import inset_axes
+
+# Test 1: Basic functionality
+fig, (ax1, ax2) = plt.subplots(1, 2, figsize=[5.5, 2.8])
+axins1 = inset_axes(ax1, width=1.3, height=0.9)
+axins1.set_title('Test Inset 1')
+plt.savefig('test1.png')
+print("Test 1 passed")
+
+# Test 2: Different locations
+fig, ax = plt.subplots(figsize=[4, 3])
+axins2 = inset_axes(ax, width='30%', height='20%', loc='upper right')
+axins2.set_title('Upper Right')
+axins3 = inset_axes(ax, width='30%', height='20%', loc='lower left') 
+axins3.set_title('Lower Left')
+plt.savefig('test2.png')
+print("Test 2 passed")
+
+# Test 3: With actual plotting
+fig, ax = plt.subplots(figsize=[4, 3])
+ax.plot([0, 1, 2], [0, 1, 0])
+axins4 = inset_axes(ax, width='40%', height='30%', loc='upper right')
+axins4.plot([0, 1], [1, 0], 'r-')
+axins4.set_title('Inset Plot')
+plt.savefig('test3.png')
+print("Test 3 passed")
+
+print("All tests completed successfully!")
\ No newline at end of file